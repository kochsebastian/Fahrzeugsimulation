/**
* @warning AUTOMATICALLY GENERATED FILE! DO NOT EDIT!
*
* @file    components_SOS_state_Automatic.c
*
* @author  Generated by ASCET-DEVELOPER V7.4.0 (Backend: Code Generator V7.4.0)
*
* @date    22.03.2019 09:25:43
*
* @brief   "components_SOS_state>>Automatic (module code)"
*
*/



/*-----------------------------------------------------------------------------
 *    Include files
 *----------------------------------------------------------------------------*/

#include "globalH.h"
#include "components_SOS_state_Automatic.h"
/******************************************************************************
 * BEGIN: source code of a multiple instance class
 ******************************************************************************/



#define aktiv_VAL (self->components_SOS_state_Automatic_RAM->aktiv)
#define duration_VAL (self->components_SOS_state_Automatic_RAM->duration)
#define myDT_VAL (self->components_SOS_state_Automatic_RAM->myDT)
#define run_VAL (self->components_SOS_state_Automatic_RAM->run)
#define sm_VAL (self->components_SOS_state_Automatic_RAM->sm)
#define statelocation_VAL (self->components_SOS_state_Automatic_RAM->statelocation)
#define status_VAL (self->components_SOS_state_Automatic_RAM->status)
#define x_VAL (self->components_SOS_state_Automatic_RAM->x)
#define y_VAL (self->components_SOS_state_Automatic_RAM->y)

/*-----------------------------------------------------------------------------
 *    Defines
 *----------------------------------------------------------------------------*/

#define beep_long 1U
#define beep_short 2U
#define no_long 3U
#define no_short 4U
#define off 0U



/******************************************************************************
 * BEGIN: FUNCTIONS OF COMPONENT
 ******************************************************************************/


/******************************************************************************
 * BEGIN: DEFINITION OF METHOD 'components_SOS_state_Automatic_esdl_getState'
 * ----------------------------------------------------------------------------
 * model name:...................................'esdl_getState'
 * memory class:.................................'CODE'
 * ---------------------------------------------------------------------------*/

uint8 components_SOS_state_Automatic_esdl_getState ( const struct components_SOS_state_Automatic * self)
{
   return sm_VAL;
}
/* ----------------------------------------------------------------------------
 * END: DEFINITION OF METHOD 'components_SOS_state_Automatic_esdl_getState'
 ******************************************************************************/




/******************************************************************************
 * BEGIN: DEFINITION OF METHOD 'components_SOS_state_Automatic_sOS_stateStatemachineTrigger'
 * ----------------------------------------------------------------------------
 * model name:...................................'sOS_stateStatemachineTrigger'
 * memory class:.................................'CODE'
 * ---------------------------------------------------------------------------*/

void components_SOS_state_Automatic_sOS_stateStatemachineTrigger ( const struct components_SOS_state_Automatic * self)
{
   switch (sm_VAL)
   {
      case beep_long:
         if (duration_VAL >= 1.6F)
         {
            status_VAL = 0;
            duration_VAL = 0.0F;
            y_VAL = ((y_VAL <= 2147483646L) ? (y_VAL + 1) : 2147483647L);
            statelocation_VAL = 4.0F;
            sm_VAL = no_long;
            break;
         } /* end if */
         duration_VAL = duration_VAL + myDT_VAL;
         break;
      case beep_short:
         if (duration_VAL >= 0.8F)
         {
            status_VAL = 0;
            duration_VAL = 0.0F;
            x_VAL = ((x_VAL <= 2147483646L) ? (x_VAL + 1) : 2147483647L);
            run_VAL = ((run_VAL <= 2147483646L) ? (run_VAL + 1) : 2147483647L);
            statelocation_VAL = 2.0F;
            sm_VAL = no_short;
            break;
         } /* end if */
         duration_VAL = duration_VAL + myDT_VAL;
         break;
      case no_long:
         if ((duration_VAL >= 1.6F) && (y_VAL < 3))
         {
            status_VAL = 1;
            duration_VAL = 0.0F;
            x_VAL = 0;
            statelocation_VAL = 3.0F;
            sm_VAL = beep_long;
            break;
         } /* end if */
         if ((duration_VAL >= 1.6F) && (y_VAL >= 3))
         {
            status_VAL = 1;
            duration_VAL = 0.0F;
            y_VAL = 0;
            statelocation_VAL = 1.0F;
            sm_VAL = beep_short;
            break;
         } /* end if */
         duration_VAL = duration_VAL + myDT_VAL;
         break;
      case no_short:
         if ((duration_VAL >= 0.8F) && (x_VAL >= 3) && (run_VAL < 6))
         {
            status_VAL = 1;
            duration_VAL = 0.0F;
            x_VAL = 0;
            statelocation_VAL = 3.0F;
            sm_VAL = beep_long;
            break;
         } /* end if */
         if ((duration_VAL >= 0.8F) && (x_VAL < 3))
         {
            status_VAL = 1;
            duration_VAL = 0.0F;
            y_VAL = 0;
            statelocation_VAL = 1.0F;
            sm_VAL = beep_short;
            break;
         } /* end if */
         if ((duration_VAL >= 0.8F) && (run_VAL >= 6))
         {
            run_VAL = 0;
            x_VAL = 0;
            y_VAL = 0;
            statelocation_VAL = 0.0F;
            status_VAL = 0;
            sm_VAL = off;
            break;
         } /* end if */
         duration_VAL = duration_VAL + myDT_VAL;
         break;
      case off:
      default:
         if (aktiv_VAL)
         {
            status_VAL = 1;
            duration_VAL = 0.0F;
            y_VAL = 0;
            statelocation_VAL = 1.0F;
            sm_VAL = beep_short;
            break;
         } /* end if */
         break;
   } /* end switch */
}
/* ----------------------------------------------------------------------------
 * END: DEFINITION OF METHOD 'components_SOS_state_Automatic_sOS_stateStatemachineTrigger'
 ******************************************************************************/



/* ****************************************************************************
 * END: FUNCTIONS OF COMPONENT
 ******************************************************************************/



